@model IEnumerable<Department>
@{
    Layout = "_Layout1";
    ViewBag.Title = "Departments";
}


   <div class="container-sm">

    @if (User.IsInRole("Admin"))
    {
        <a href="/Department/Create" class="btn btn-primary fs-5">Create Department</a>
    }
    
       
        <table class="table  table-hover mt-2">
            <thead>
                <tr>

                   <td scope="col" class="fw-bold" >#</td>
                <td scope="col" class="fw-bold fs-2">Id</td>
                <td scope="col" class="fw-bold fs-2"> Name</td>
                <td scope="col" class="fw-bold fs-2">Capacity</td>
                <td scope="col" class="fw-bold fs-2">Date Of Creation</td>
                <td scope="col" class="fw-bold fs-2">Details</td>
                @if (User.IsInRole("Admin"))
                {
                    <td scope="col" class="fw-bold fs-2">Edit</td>
                    <td scope="col" class="fw-bold fs-2">Delete</td>
                }
                
                <td scope="col" class="fw-bold fs-2"> Courses</td>

                </tr>
            </thead>
        <tbody class="table-group-divider">
                @if (Model == null || !Model.Any())
                {
                    <tr>
                        <td colspan="6">No Data Founded</td>
                </tr>
            }
            else
            {
                var index = 1;
                foreach (var item in Model)
                    {
                        <tr>
                            <th scope="row" class="text-success">@(index++)</th>
                            <td>@item.DeptId</td>
                            <td>@item.DeptName</td>
                            <td>@item.Students.Count</td>
                            <td>@item.DateOfCreation.ToShortDateString()</td>
                        <td><a class="btn btn-success text-light " asp-action="details" asp-controller="Department" asp-route-id="@item.DeptId"><i class="fa-solid fa-circle-info m-1"></i>Details</a></td>
                        @if(User.IsInRole("Admin"))
                        {
                            <td><a class="btn btn-warning text-light" asp-action="edit" asp-controller="Department" asp-route-id="@item.DeptId"><i class="fa-solid fa-pen-to-square m-1"></i>Edit</a></td>
                            <td><a class="btn btn-danger text-light deleteRow" asp-action="delete" asp-controller="Department" asp-route-id="@item.DeptId"><i class="fa-solid fa-trash m-1"></i>Delete</a> </td>
                        }
                       
                        <td><a class="btn btn-info text-light" asp-action="ShowCourseByDept" asp-controller="DeptCourse" asp-route-id="@item.DeptId"><i class="fa-solid fa-arrow-up-right-from-square m-1"></i>Show Courses</a></td>
                        @*<a class="btn btn-info " asp-action="ManageCourses" asp-controller="DeptCourse" asp-route-id="@item.DeptId">Change Courses</a> *@
                            
                        </tr>
                    }
                }
            </tbody>
        </table>

        <div id="div1">

        </div>
    </div>


   <script src="/js/site.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
   

